{"version":3,"file":"tooltip.vue2.mjs","sources":["../../../../../../packages/components/tooltip/src/tooltip.vue"],"sourcesContent":["<template>\n  <el-popper ref=\"popperRef\" :role=\"role\">\n    <el-tooltip-trigger\n      :disabled=\"disabled\"\n      :trigger=\"trigger\"\n      :trigger-keys=\"triggerKeys\"\n      :virtual-ref=\"virtualRef\"\n      :virtual-triggering=\"virtualTriggering\"\n      :focus-on-target=\"focusOnTarget\"\n    >\n      <slot v-if=\"$slots.default\" />\n    </el-tooltip-trigger>\n    <el-tooltip-content\n      ref=\"contentRef\"\n      :aria-label=\"ariaLabel\"\n      :boundaries-padding=\"boundariesPadding\"\n      :content=\"content\"\n      :disabled=\"disabled\"\n      :effect=\"effect\"\n      :enterable=\"enterable\"\n      :fallback-placements=\"fallbackPlacements\"\n      :hide-after=\"hideAfter\"\n      :gpu-acceleration=\"gpuAcceleration\"\n      :offset=\"offset\"\n      :persistent=\"persistent\"\n      :popper-class=\"kls\"\n      :popper-style=\"popperStyle\"\n      :placement=\"placement\"\n      :popper-options=\"popperOptions\"\n      :arrow-offset=\"arrowOffset\"\n      :pure=\"pure\"\n      :raw-content=\"rawContent\"\n      :reference-el=\"referenceEl\"\n      :trigger-target-el=\"triggerTargetEl\"\n      :show-after=\"showAfter\"\n      :strategy=\"strategy\"\n      :teleported=\"teleported\"\n      :transition=\"transition\"\n      :virtual-triggering=\"virtualTriggering\"\n      :z-index=\"zIndex\"\n      :append-to=\"appendTo\"\n      :loop=\"loop\"\n    >\n      <slot name=\"content\">\n        <span v-if=\"rawContent\" v-html=\"content\" />\n        <span v-else>{{ content }}</span>\n      </slot>\n      <el-popper-arrow v-if=\"showArrow\" />\n    </el-tooltip-content>\n  </el-popper>\n</template>\n\n<script lang=\"ts\" setup>\nimport {\n  computed,\n  onBeforeUnmount,\n  onDeactivated,\n  provide,\n  readonly,\n  ref,\n  toRef,\n  unref,\n  watch,\n} from 'vue'\nimport {\n  ElPopper,\n  ElPopperArrow,\n  popperArrowPropsDefaults,\n} from '@element-plus/components/popper'\nimport { isBoolean } from '@element-plus/utils'\nimport {\n  useDelayedToggle,\n  useId,\n  useNamespace,\n  usePopperContainer,\n} from '@element-plus/hooks'\nimport { TOOLTIP_INJECTION_KEY } from './constants'\nimport { tooltipEmits, useTooltipModelToggle } from './tooltip'\nimport ElTooltipTrigger from './trigger.vue'\nimport ElTooltipContent from './content.vue'\nimport { useTooltipContentPropsDefaults } from './content'\nimport { useTooltipTriggerPropsDefaults } from './trigger'\n\nimport type { Mutable } from '@element-plus/utils'\nimport type { TooltipContentInstance } from './content'\nimport type { UseTooltipProps } from './tooltip'\nimport type { PopperInstance } from '@element-plus/components/popper'\n\ndefineOptions({\n  name: 'ElTooltip',\n})\n\nconst props = withDefaults(defineProps<UseTooltipProps>(), {\n  role: 'tooltip',\n  ...useTooltipContentPropsDefaults,\n  ...useTooltipTriggerPropsDefaults,\n  ...popperArrowPropsDefaults,\n  showArrow: true,\n})\nconst emit = defineEmits(tooltipEmits as Mutable<typeof tooltipEmits>)\n\nusePopperContainer()\n\nconst ns = useNamespace('tooltip')\nconst id = useId()\nconst popperRef = ref<PopperInstance>()\nconst contentRef = ref<TooltipContentInstance>()\n\nconst updatePopper = () => {\n  const popperComponent = unref(popperRef)\n  if (popperComponent) {\n    popperComponent.popperInstanceRef?.update()\n  }\n}\nconst open = ref(false)\nconst toggleReason = ref<Event>()\n\nconst { show, hide, hasUpdateHandler } = useTooltipModelToggle({\n  indicator: open,\n  toggleReason,\n})\n\nconst { onOpen, onClose } = useDelayedToggle({\n  showAfter: toRef(props, 'showAfter'),\n  hideAfter: toRef(props, 'hideAfter'),\n  autoClose: toRef(props, 'autoClose'),\n  open: show,\n  close: hide,\n})\n\nconst controlled = computed(\n  () => isBoolean(props.visible) && !hasUpdateHandler.value\n)\n\nconst kls = computed(() => {\n  return [ns.b(), props.popperClass!]\n})\n\nprovide(TOOLTIP_INJECTION_KEY, {\n  controlled,\n  id,\n  open: readonly(open),\n  trigger: toRef(props, 'trigger'),\n  onOpen,\n  onClose,\n  onToggle: (event?: Event) => {\n    if (unref(open)) {\n      onClose(event)\n    } else {\n      onOpen(event)\n    }\n  },\n  onShow: () => {\n    emit('show', toggleReason.value)\n  },\n  onHide: () => {\n    emit('hide', toggleReason.value)\n  },\n  onBeforeShow: () => {\n    emit('before-show', toggleReason.value)\n  },\n  onBeforeHide: () => {\n    emit('before-hide', toggleReason.value)\n  },\n  updatePopper,\n})\n\nwatch(\n  () => props.disabled,\n  (disabled) => {\n    if (disabled && open.value) {\n      open.value = false\n    }\n  }\n)\n\nconst isFocusInsideContent = (event?: FocusEvent) => {\n  return contentRef.value?.isFocusInsideContent(event)\n}\n\nonDeactivated(() => open.value && hide())\n\nonBeforeUnmount(() => {\n  toggleReason.value = undefined\n})\n\ndefineExpose({\n  /**\n   * @description el-popper component instance\n   */\n  popperRef,\n  /**\n   * @description el-tooltip-content component instance\n   */\n  contentRef,\n  /**\n   * @description validate current focus event is trigger inside el-tooltip-content\n   */\n  isFocusInsideContent,\n  /**\n   * @description update el-popper component instance\n   */\n  updatePopper,\n  /**\n   * @description expose onOpen function to mange el-tooltip open state\n   */\n  onOpen,\n  /**\n   * @description expose onClose function to manage el-tooltip close state\n   */\n  onClose,\n  /**\n   * @description expose hide function\n   */\n  hide,\n})\n</script>\n"],"names":["_createBlock","_unref","_createVNode","ElTooltipTrigger","$slots","_renderSlot","ElTooltipContent","_createElementBlock","_openBlock","ElPopperArrow"],"mappings":"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"}