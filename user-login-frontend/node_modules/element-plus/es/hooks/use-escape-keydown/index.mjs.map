{"version":3,"file":"index.mjs","sources":["../../../../../packages/hooks/use-escape-keydown/index.ts"],"sourcesContent":["import { onBeforeUnmount, onMounted } from 'vue'\nimport { getEventCode, isClient } from '@element-plus/utils'\nimport { EVENT_CODE } from '@element-plus/constants'\n\nlet registeredEscapeHandlers: ((e: KeyboardEvent) => void)[] = []\n\nconst cachedHandler = (event: KeyboardEvent) => {\n  const code = getEventCode(event)\n  if (code === EVENT_CODE.esc) {\n    registeredEscapeHandlers.forEach((registeredHandler) =>\n      registeredHandler(event)\n    )\n  }\n}\n\nexport const useEscapeKeydown = (handler: (e: KeyboardEvent) => void) => {\n  onMounted(() => {\n    if (registeredEscapeHandlers.length === 0) {\n      document.addEventListener('keydown', cachedHandler)\n    }\n    if (isClient) registeredEscapeHandlers.push(handler)\n  })\n\n  onBeforeUnmount(() => {\n    registeredEscapeHandlers = registeredEscapeHandlers.filter(\n      (registeredHandler) => registeredHandler !== handler\n    )\n    if (registeredEscapeHandlers.length === 0) {\n      if (isClient) document.removeEventListener('keydown', cachedHandler)\n    }\n  })\n}\n"],"names":[],"mappings":";;;;;AAIA,IAAI,2BAA2D,EAAC;AAEhE,MAAM,aAAA,GAAgB,CAAC,KAAA,KAAyB;AAC9C,EAAA,MAAM,IAAA,GAAO,aAAa,KAAK,CAAA;AAC/B,EAAA,IAAI,IAAA,KAAS,WAAW,GAAA,EAAK;AAC3B,IAAA,wBAAA,CAAyB,OAAA;AAAA,MAAQ,CAAC,iBAAA,KAChC,iBAAA,CAAkB,KAAK;AAAA,KACzB;AAAA,EACF;AACF,CAAA;AAEO,MAAM,gBAAA,GAAmB,CAAC,OAAA,KAAwC;AACvE,EAAA,SAAA,CAAU,MAAM;AACd,IAAA,IAAI,wBAAA,CAAyB,WAAW,CAAA,EAAG;AACzC,MAAA,QAAA,CAAS,gBAAA,CAAiB,WAAW,aAAa,CAAA;AAAA,IACpD;AACA,IAAA,IAAI,QAAA,EAAU,wBAAA,CAAyB,IAAA,CAAK,OAAO,CAAA;AAAA,EACrD,CAAC,CAAA;AAED,EAAA,eAAA,CAAgB,MAAM;AACpB,IAAA,wBAAA,GAA2B,wBAAA,CAAyB,MAAA;AAAA,MAClD,CAAC,sBAAsB,iBAAA,KAAsB;AAAA,KAC/C;AACA,IAAA,IAAI,wBAAA,CAAyB,WAAW,CAAA,EAAG;AACzC,MAAA,IAAI,QAAA,EAAU,QAAA,CAAS,mBAAA,CAAoB,SAAA,EAAW,aAAa,CAAA;AAAA,IACrE;AAAA,EACF,CAAC,CAAA;AACH;;;;"}