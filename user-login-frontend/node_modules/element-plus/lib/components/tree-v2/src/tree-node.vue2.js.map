{"version":3,"file":"tree-node.vue2.js","sources":["../../../../../../packages/components/tree-v2/src/tree-node.vue"],"sourcesContent":["<template>\n  <div\n    ref=\"node$\"\n    :class=\"[\n      ns.b('node'),\n      ns.is('expanded', expanded),\n      ns.is('current', current),\n      ns.is('focusable', !disabled),\n      ns.is('checked', !disabled && checked),\n      getNodeClass(node),\n    ]\"\n    role=\"treeitem\"\n    tabindex=\"-1\"\n    :aria-expanded=\"expanded\"\n    :aria-disabled=\"disabled\"\n    :aria-checked=\"checked\"\n    :data-key=\"node?.key\"\n    @click.stop=\"handleClick\"\n    @contextmenu=\"handleContextMenu\"\n    @dragover.prevent\n    @dragenter.prevent\n    @drop.stop=\"handleDrop\"\n  >\n    <div\n      :class=\"ns.be('node', 'content')\"\n      :style=\"{\n        paddingLeft: `${(node.level - 1) * indent}px`,\n        height: itemSize + 'px',\n      }\"\n    >\n      <el-icon\n        v-if=\"icon\"\n        :class=\"[\n          ns.is('leaf', !!node?.isLeaf),\n          ns.is('hidden', hiddenExpandIcon),\n          {\n            expanded: !node?.isLeaf && expanded,\n          },\n          ns.be('node', 'expand-icon'),\n        ]\"\n        @click.stop=\"handleExpandIconClick\"\n      >\n        <component :is=\"icon\" />\n      </el-icon>\n      <el-checkbox\n        v-if=\"showCheckbox\"\n        :model-value=\"checked\"\n        :indeterminate=\"indeterminate\"\n        :disabled=\"disabled\"\n        @change=\"handleCheckChange\"\n        @click.stop\n      />\n      <el-node-content :node=\"{ ...node, expanded }\" />\n    </div>\n  </div>\n</template>\n\n<script lang=\"ts\" setup>\nimport { computed, inject } from 'vue'\nimport ElIcon from '@element-plus/components/icon'\nimport { CaretRight } from '@element-plus/icons-vue'\nimport ElCheckbox from '@element-plus/components/checkbox'\nimport { useNamespace } from '@element-plus/hooks'\nimport { isFunction, isString, mutable } from '@element-plus/utils'\nimport ElNodeContent from './tree-node-content'\nimport {\n  EMPTY_NODE,\n  NODE_CONTEXTMENU,\n  ROOT_TREE_INJECTION_KEY,\n  treeNodeEmits,\n} from './virtual-tree'\n\nimport type { TreeNode, TreeNodeProps } from './types'\nimport type { CheckboxValueType } from '@element-plus/components/checkbox'\n\ndefineOptions({\n  name: 'ElTreeNode',\n})\n\nconst props = withDefaults(defineProps<TreeNodeProps>(), {\n  node: () => mutable(EMPTY_NODE),\n  itemSize: 26,\n})\nconst emit = defineEmits(treeNodeEmits)\n\nconst tree = inject(ROOT_TREE_INJECTION_KEY)\nconst ns = useNamespace('tree')\n\nconst indent = computed(() => tree?.props.indent ?? 16)\nconst icon = computed(() => tree?.props.icon ?? CaretRight)\n\nconst getNodeClass = (node: TreeNode) => {\n  const nodeClassFunc = tree?.props.props?.class\n  if (!nodeClassFunc) return {}\n\n  let className\n  if (isFunction(nodeClassFunc)) {\n    const { data } = node\n    className = nodeClassFunc(data, node)\n  } else {\n    className = nodeClassFunc\n  }\n\n  return isString(className) ? { [className]: true } : className\n}\n\nconst handleClick = (e: MouseEvent) => {\n  emit('click', props.node, e)\n}\nconst handleDrop = (e: DragEvent) => {\n  emit('drop', props.node, e)\n}\nconst handleExpandIconClick = () => {\n  emit('toggle', props.node)\n}\nconst handleCheckChange = (value: CheckboxValueType) => {\n  emit('check', props.node, value)\n}\n\nconst handleContextMenu = (event: Event) => {\n  if (tree?.instance?.vnode?.props?.['onNodeContextmenu']) {\n    event.stopPropagation()\n    event.preventDefault()\n  }\n  tree?.ctx.emit(NODE_CONTEXTMENU, event, props.node?.data, props.node)\n}\n</script>\n"],"names":["inject","ROOT_TREE_INJECTION_KEY","useNamespace","computed","CaretRight","isFunction","isString","NODE_CONTEXTMENU","_createElementBlock","_normalizeClass","_unref","_createElementVNode","_normalizeStyle","_createBlock","ElIcon","_openBlock","_resolveDynamicComponent","ElCheckbox","_createVNode","ElNodeContent"],"mappings":"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"}