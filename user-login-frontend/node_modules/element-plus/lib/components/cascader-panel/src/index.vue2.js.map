{"version":3,"file":"index.vue2.js","sources":["../../../../../../packages/components/cascader-panel/src/index.vue"],"sourcesContent":["<template>\n  <div\n    :class=\"[ns.b('panel'), ns.is('bordered', border)]\"\n    @keydown=\"handleKeyDown\"\n  >\n    <el-cascader-menu\n      v-for=\"(menu, index) in menus\"\n      :key=\"index\"\n      :ref=\"(item) => (menuList[index] = item as CascaderMenuInstance)\"\n      :index=\"index\"\n      :nodes=\"[...menu]\"\n    >\n      <template #empty>\n        <slot name=\"empty\" />\n      </template>\n    </el-cascader-menu>\n  </div>\n</template>\n\n<script lang=\"ts\" setup>\nimport {\n  computed,\n  nextTick,\n  onBeforeUpdate,\n  onMounted,\n  provide,\n  reactive,\n  ref,\n  useSlots,\n  watch,\n} from 'vue'\nimport { cloneDeep, flattenDeep, isEqual } from 'lodash-unified'\nimport {\n  castArray,\n  focusNode,\n  getEventCode,\n  getSibling,\n  isClient,\n  isEmpty,\n  scrollIntoView,\n  unique,\n} from '@element-plus/utils'\nimport {\n  CHANGE_EVENT,\n  EVENT_CODE,\n  UPDATE_MODEL_EVENT,\n} from '@element-plus/constants'\nimport { useNamespace } from '@element-plus/hooks'\nimport ElCascaderMenu from './menu.vue'\nimport Store from './store'\nimport Node from './node'\nimport { cascaderPanelEmits, useCascaderConfig } from './config'\nimport { checkNode, getMenuIndex, sortByOriginalOrder } from './utils'\nimport { CASCADER_PANEL_INJECTION_KEY } from './types'\n\nimport type {\n  CascaderNode,\n  CascaderNodeValue,\n  CascaderOption,\n  CascaderProps,\n  CascaderValue,\n  ElCascaderPanelContext,\n} from './types'\nimport type { CascaderMenuInstance } from './instance'\nimport type { CascaderPanelProps } from './config'\n\ndefineOptions({\n  name: 'ElCascaderPanel',\n})\n\nconst props = withDefaults(defineProps<CascaderPanelProps>(), {\n  options: () => [] as CascaderOption[],\n  props: () => ({}) as CascaderProps,\n  border: true,\n})\nconst emit = defineEmits(cascaderPanelEmits)\n\n// for interrupt sync check status in lazy mode\nlet manualChecked = false\n\nconst ns = useNamespace('cascader')\nconst config = useCascaderConfig(props)\nconst slots = useSlots()\n\nlet store: Store\nconst initialLoaded = ref(true)\nconst initialLoadedOnce = ref(false)\nconst menuList = ref<CascaderMenuInstance[]>([])\nconst checkedValue = ref<CascaderValue>()\nconst menus = ref<CascaderNode[][]>([])\nconst expandingNode = ref<CascaderNode>()\nconst checkedNodes = ref<CascaderNode[]>([])\n\nconst isHoverMenu = computed(() => config.value.expandTrigger === 'hover')\nconst renderLabelFn = computed(() => props.renderLabel || slots.default)\n\nconst initStore = () => {\n  const { options } = props\n  const cfg = config.value\n\n  manualChecked = false\n  store = new Store(options, cfg)\n  menus.value = [store.getNodes()]\n\n  if (cfg.lazy && isEmpty(props.options)) {\n    initialLoaded.value = false\n    lazyLoad(undefined, (list) => {\n      if (list) {\n        store = new Store(list, cfg)\n        menus.value = [store.getNodes()]\n      }\n      initialLoaded.value = true\n      syncCheckedValue(false, true)\n    })\n  } else {\n    syncCheckedValue(false, true)\n  }\n}\n\nconst lazyLoad: ElCascaderPanelContext['lazyLoad'] = (node, cb) => {\n  const cfg = config.value\n  node! = node || new Node({}, cfg, undefined, true)\n  node.loading = true\n\n  const resolve = (dataList?: CascaderOption[]) => {\n    const _node = node as Node\n    const parent = _node.root ? null : _node\n    _node.loading = false\n    _node.loaded = true\n    _node.childrenData = _node.childrenData || []\n    dataList && store?.appendNodes(dataList, parent as Node)\n    dataList && cb?.(dataList)\n    if (node.level === 0) {\n      initialLoadedOnce.value = true\n    }\n  }\n\n  const reject = () => {\n    node!.loading = false\n    node!.loaded = false\n    if (node!.level === 0) {\n      initialLoaded.value = true\n    }\n  }\n\n  cfg.lazyLoad(node, resolve, reject)\n}\n\nconst expandNode: ElCascaderPanelContext['expandNode'] = (node, silent) => {\n  const { level } = node\n  const newMenus = menus.value.slice(0, level)\n  let newExpandingNode: CascaderNode\n\n  if (node.isLeaf) {\n    newExpandingNode = node.pathNodes[level - 2]\n  } else {\n    newExpandingNode = node\n    newMenus.push(node.children)\n  }\n\n  if (expandingNode.value?.uid !== newExpandingNode?.uid) {\n    expandingNode.value = node\n    menus.value = newMenus\n    !silent && emit('expand-change', node?.pathValues || [])\n  }\n}\n\nconst handleCheckChange: ElCascaderPanelContext['handleCheckChange'] = (\n  node,\n  checked,\n  emitClose = true\n) => {\n  const { checkStrictly, multiple } = config.value\n  const oldNode = checkedNodes.value[0]\n  manualChecked = true\n\n  !multiple && oldNode?.doCheck(false)\n  node.doCheck(checked)\n  calculateCheckedValue()\n  emitClose && !multiple && !checkStrictly && emit('close')\n  !emitClose && !multiple && expandParentNode(node)\n}\n\nconst expandParentNode = (node: Node | undefined) => {\n  if (!node) return\n  node = node.parent\n  expandParentNode(node)\n  node && expandNode(node)\n}\n\nconst getFlattedNodes = (leafOnly: boolean) => store?.getFlattedNodes(leafOnly)\n\nconst getCheckedNodes = (leafOnly: boolean) => {\n  return getFlattedNodes(leafOnly)?.filter(({ checked }) => checked !== false)\n}\n\nconst clearCheckedNodes = () => {\n  checkedNodes.value.forEach((node) => node.doCheck(false))\n  calculateCheckedValue()\n  menus.value = menus.value.slice(0, 1)\n  expandingNode.value = undefined\n  emit('expand-change', [])\n}\n\nconst calculateCheckedValue = () => {\n  const { checkStrictly, multiple } = config.value\n  const oldNodes = checkedNodes.value\n  const newNodes = getCheckedNodes(!checkStrictly)!\n  // ensure the original order\n  const nodes = sortByOriginalOrder(oldNodes, newNodes)\n  const values = nodes.map((node) => node.valueByOption)\n  checkedNodes.value = nodes\n  checkedValue.value = multiple ? values : (values[0] ?? null)\n}\n\nconst syncCheckedValue = (loaded = false, forced = false) => {\n  const { modelValue } = props\n  const { lazy, multiple, checkStrictly } = config.value\n  const leafOnly = !checkStrictly\n\n  if (\n    !initialLoaded.value ||\n    manualChecked ||\n    (!forced && isEqual(modelValue, checkedValue.value))\n  )\n    return\n\n  if (lazy && !loaded) {\n    const values: CascaderNodeValue[] = unique(\n      flattenDeep(castArray(modelValue as CascaderNodeValue[]))\n    )\n    const nodes = values\n      .map((val) => store?.getNodeByValue(val))\n      .filter((node) => !!node && !node.loaded && !node.loading) as Node[]\n\n    if (nodes.length) {\n      nodes.forEach((node) => {\n        lazyLoad(node, () => syncCheckedValue(false, forced))\n      })\n    } else {\n      syncCheckedValue(true, forced)\n    }\n  } else {\n    const values = multiple ? castArray(modelValue) : [modelValue]\n    const nodes = unique(\n      values.map((val) =>\n        store?.getNodeByValue(val as CascaderNodeValue, leafOnly)\n      )\n    ) as Node[]\n    syncMenuState(nodes, forced)\n    checkedValue.value = cloneDeep(modelValue ?? undefined)\n  }\n}\n\nconst syncMenuState = (\n  newCheckedNodes: CascaderNode[],\n  reserveExpandingState = true\n) => {\n  const { checkStrictly } = config.value\n  const oldNodes = checkedNodes.value\n  const newNodes = newCheckedNodes.filter(\n    (node) => !!node && (checkStrictly || node.isLeaf)\n  )\n  const oldExpandingNode = store?.getSameNode(expandingNode.value!)\n  const newExpandingNode =\n    (reserveExpandingState && oldExpandingNode) || newNodes[0]\n\n  if (newExpandingNode) {\n    newExpandingNode.pathNodes.forEach((node) => expandNode(node, true))\n  } else {\n    expandingNode.value = undefined\n  }\n\n  oldNodes.forEach((node) => node.doCheck(false))\n  reactive(newNodes).forEach((node) => node.doCheck(true))\n  checkedNodes.value = newNodes\n  nextTick(scrollToExpandingNode)\n}\n\nconst scrollToExpandingNode = () => {\n  if (!isClient) return\n\n  menuList.value.forEach((menu) => {\n    const menuElement = menu?.$el\n    if (menuElement) {\n      const container = menuElement.querySelector(\n        `.${ns.namespace.value}-scrollbar__wrap`\n      )\n      let activeNode = menuElement.querySelector(\n        `.${ns.b('node')}.in-active-path`\n      )\n      if (!activeNode) {\n        const activeElements = menuElement.querySelectorAll(\n          `.${ns.b('node')}.${ns.is('active')}`\n        )\n        activeNode = activeElements[activeElements.length - 1]\n      }\n      scrollIntoView(container, activeNode)\n    }\n  })\n}\n\nconst handleKeyDown = (e: KeyboardEvent) => {\n  const target = e.target as HTMLElement\n  const code = getEventCode(e)\n\n  switch (code) {\n    case EVENT_CODE.up:\n    case EVENT_CODE.down: {\n      e.preventDefault()\n      const distance = code === EVENT_CODE.up ? -1 : 1\n      focusNode(\n        getSibling(\n          target,\n          distance,\n          `.${ns.b('node')}[tabindex=\"-1\"]`\n        ) as HTMLElement\n      )\n      break\n    }\n    case EVENT_CODE.left: {\n      e.preventDefault()\n      const preMenu = menuList.value[getMenuIndex(target) - 1]\n      const expandedNode = preMenu?.$el.querySelector(\n        `.${ns.b('node')}[aria-expanded=\"true\"]`\n      )\n      focusNode(expandedNode)\n      break\n    }\n    case EVENT_CODE.right: {\n      e.preventDefault()\n      const nextMenu = menuList.value[getMenuIndex(target) + 1]\n      const firstNode = nextMenu?.$el.querySelector(\n        `.${ns.b('node')}[tabindex=\"-1\"]`\n      )\n      focusNode(firstNode)\n      break\n    }\n    case EVENT_CODE.enter:\n    case EVENT_CODE.numpadEnter:\n      checkNode(target)\n      break\n  }\n}\n\nprovide(\n  CASCADER_PANEL_INJECTION_KEY,\n  reactive({\n    config,\n    expandingNode,\n    checkedNodes,\n    isHoverMenu,\n    initialLoaded,\n    renderLabelFn,\n    lazyLoad,\n    expandNode,\n    handleCheckChange,\n  })\n)\n\nwatch(\n  config,\n  (newVal, oldVal) => {\n    if (isEqual(newVal, oldVal)) return\n    initStore()\n  },\n  {\n    immediate: true,\n  }\n)\n\nwatch(() => props.options, initStore, {\n  deep: true,\n})\n\nwatch(\n  () => props.modelValue,\n  () => {\n    manualChecked = false\n    syncCheckedValue()\n  },\n  {\n    deep: true,\n  }\n)\n\nwatch(\n  () => checkedValue.value,\n  (val) => {\n    if (!isEqual(val, props.modelValue)) {\n      emit(UPDATE_MODEL_EVENT, val)\n      emit(CHANGE_EVENT, val)\n    }\n  }\n)\n\nconst loadLazyRootNodes = () => {\n  if (initialLoadedOnce.value) return\n  initStore()\n}\n\nonBeforeUpdate(() => (menuList.value = []))\n\nonMounted(() => !isEmpty(props.modelValue) && syncCheckedValue())\n\ndefineExpose({\n  menuList,\n  menus,\n  checkedNodes,\n  handleKeyDown,\n  handleCheckChange,\n  getFlattedNodes,\n  /**\n   * @description get an array of currently selected node,(leafOnly) whether only return the leaf checked nodes, default is `false`\n   */\n  getCheckedNodes,\n  /**\n   * @description clear checked nodes\n   */\n  clearCheckedNodes,\n  calculateCheckedValue,\n  scrollToExpandingNode,\n  loadLazyRootNodes,\n})\n</script>\n"],"names":["useNamespace","config","useCascaderConfig","useSlots","store","ref","computed","Store","isEmpty","node","Node","sortByOriginalOrder","isEqual","unique","flattenDeep","castArray","cloneDeep","reactive","nextTick","isClient","scrollIntoView","getEventCode","EVENT_CODE","focusNode","getSibling","getMenuIndex","checkNode","provide","CASCADER_PANEL_INJECTION_KEY","watch","UPDATE_MODEL_EVENT","CHANGE_EVENT","onBeforeUpdate","onMounted","_createElementBlock","_normalizeClass","_unref","_openBlock","_Fragment","_renderList","_createBlock","ElCascaderMenu","_renderSlot"],"mappings":"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"}