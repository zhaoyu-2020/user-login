{"version":3,"file":"use-collapse-item.js","sources":["../../../../../../packages/components/collapse/src/use-collapse-item.ts"],"sourcesContent":["import { computed, inject, ref, unref } from 'vue'\nimport { useIdInjection, useNamespace } from '@element-plus/hooks'\nimport { collapseContextKey } from './constants'\n\nimport type { CollapseItemProps } from './collapse-item'\n\nexport const useCollapseItem = (props: CollapseItemProps) => {\n  const collapse = inject(collapseContextKey)\n  const { namespace } = useNamespace('collapse')\n\n  const focusing = ref(false)\n  const isClick = ref(false)\n  const idInjection = useIdInjection()\n  const id = computed(() => idInjection.current++)\n  const name = computed(() => {\n    return (\n      props.name ?? `${namespace.value}-id-${idInjection.prefix}-${unref(id)}`\n    )\n  })\n\n  const isActive = computed(() =>\n    collapse?.activeNames.value.includes(unref(name))\n  )\n\n  const handleFocus = () => {\n    setTimeout(() => {\n      if (!isClick.value) {\n        focusing.value = true\n      } else {\n        isClick.value = false\n      }\n    }, 50)\n  }\n\n  const handleHeaderClick = (e: MouseEvent) => {\n    if (props.disabled) return\n    const target = e.target as HTMLElement\n    if (target?.closest('input, textarea, select')) return\n    collapse?.handleItemClick(unref(name))\n    focusing.value = false\n    isClick.value = true\n  }\n\n  const handleEnterClick = (e: KeyboardEvent) => {\n    const target = e.target as HTMLElement\n    if (target?.closest('input, textarea, select')) return\n    e.preventDefault()\n    collapse?.handleItemClick(unref(name))\n  }\n\n  return {\n    focusing,\n    id,\n    isActive,\n    handleFocus,\n    handleHeaderClick,\n    handleEnterClick,\n  }\n}\n\nexport const useCollapseItemDOM = (\n  props: CollapseItemProps,\n  { focusing, isActive, id }: Partial<ReturnType<typeof useCollapseItem>>\n) => {\n  const ns = useNamespace('collapse')\n\n  const rootKls = computed(() => [\n    ns.b('item'),\n    ns.is('active', unref(isActive)),\n    ns.is('disabled', props.disabled),\n  ])\n  const headKls = computed(() => [\n    ns.be('item', 'header'),\n    ns.is('active', unref(isActive)),\n    { focusing: unref(focusing) && !props.disabled },\n  ])\n  const arrowKls = computed(() => [\n    ns.be('item', 'arrow'),\n    ns.is('active', unref(isActive)),\n  ])\n  const itemTitleKls = computed(() => [ns.be('item', 'title')])\n  const itemWrapperKls = computed(() => ns.be('item', 'wrap'))\n  const itemContentKls = computed(() => ns.be('item', 'content'))\n  const scopedContentId = computed(() => ns.b(`content-${unref(id)}`))\n  const scopedHeadId = computed(() => ns.b(`head-${unref(id)}`))\n\n  return {\n    itemTitleKls,\n    arrowKls,\n    headKls,\n    rootKls,\n    itemWrapperKls,\n    itemContentKls,\n    scopedContentId,\n    scopedHeadId,\n  }\n}\n"],"names":["inject","collapseContextKey","useNamespace","ref","useIdInjection","computed","unref"],"mappings":"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"}