{"version":3,"file":"form-item.vue2.js","sources":["../../../../../../packages/components/form/src/form-item.vue"],"sourcesContent":["<template>\n  <div\n    ref=\"formItemRef\"\n    :class=\"formItemClasses\"\n    :role=\"isGroup ? 'group' : undefined\"\n    :aria-labelledby=\"isGroup ? labelId : undefined\"\n  >\n    <form-label-wrap\n      :is-auto-width=\"labelStyle.width === 'auto'\"\n      :update-all=\"formContext?.labelWidth === 'auto'\"\n    >\n      <component\n        :is=\"labelFor ? 'label' : 'div'\"\n        v-if=\"!!(label || $slots.label)\"\n        :id=\"labelId\"\n        :for=\"labelFor\"\n        :class=\"ns.e('label')\"\n        :style=\"labelStyle\"\n      >\n        <slot name=\"label\" :label=\"currentLabel\">\n          {{ currentLabel }}\n        </slot>\n      </component>\n    </form-label-wrap>\n\n    <div :class=\"ns.e('content')\" :style=\"contentStyle\">\n      <slot />\n      <transition-group :name=\"`${ns.namespace.value}-zoom-in-top`\">\n        <slot v-if=\"shouldShowError\" name=\"error\" :error=\"validateMessage\">\n          <div :class=\"validateClasses\">\n            {{ validateMessage }}\n          </div>\n        </slot>\n      </transition-group>\n    </div>\n  </div>\n</template>\n\n<script lang=\"ts\" setup>\nimport {\n  computed,\n  inject,\n  nextTick,\n  onBeforeUnmount,\n  onMounted,\n  provide,\n  reactive,\n  ref,\n  toRefs,\n  useSlots,\n  watch,\n} from 'vue'\nimport AsyncValidator from 'async-validator'\nimport { clone } from 'lodash-unified'\nimport { refDebounced } from '@vueuse/core'\nimport {\n  addUnit,\n  ensureArray,\n  getProp,\n  isArray,\n  isBoolean,\n  isFunction,\n} from '@element-plus/utils'\nimport { useId, useNamespace } from '@element-plus/hooks'\nimport { useFormSize } from './hooks'\nimport FormLabelWrap from './form-label-wrap'\nimport { formContextKey, formItemContextKey } from './constants'\n\nimport type { CSSProperties } from 'vue'\nimport type { RuleItem } from 'async-validator'\nimport type { Arrayable } from '@element-plus/utils'\nimport type {\n  FormItemContext,\n  FormItemRule,\n  FormValidateFailure,\n} from './types'\nimport type { FormItemProps, FormItemValidateState } from './form-item'\n\ndefineOptions({\n  name: 'ElFormItem',\n})\nconst props = withDefaults(defineProps<FormItemProps>(), {\n  labelPosition: '',\n  showMessage: true,\n  required: undefined,\n  inlineMessage: undefined,\n})\nconst slots = useSlots()\n\nconst formContext = inject(formContextKey, undefined)\nconst parentFormItemContext = inject(formItemContextKey, undefined)\n\nconst _size = useFormSize(undefined, { formItem: false })\nconst ns = useNamespace('form-item')\n\nconst labelId = useId().value\nconst inputIds = ref<string[]>([])\n\nconst validateState = ref<FormItemValidateState>('')\nconst validateStateDebounced = refDebounced(validateState, 100)\nconst validateMessage = ref('')\nconst formItemRef = ref<HTMLDivElement>()\n// special inline value.\nlet initialValue: any = undefined\nlet isResettingField = false\n\nconst labelPosition = computed(\n  () => props.labelPosition || formContext?.labelPosition\n)\n\nconst labelStyle = computed<CSSProperties>(() => {\n  if (labelPosition.value === 'top') {\n    return {}\n  }\n\n  const labelWidth = addUnit(props.labelWidth ?? formContext?.labelWidth)\n  return { width: labelWidth }\n})\n\nconst contentStyle = computed<CSSProperties>(() => {\n  if (labelPosition.value === 'top' || formContext?.inline) {\n    return {}\n  }\n  if (!props.label && !props.labelWidth && isNested) {\n    return {}\n  }\n  const labelWidth = addUnit(props.labelWidth ?? formContext?.labelWidth)\n  if (!props.label && !slots.label) {\n    return { marginLeft: labelWidth }\n  }\n  return {}\n})\n\nconst formItemClasses = computed(() => [\n  ns.b(),\n  ns.m(_size.value),\n  ns.is('error', validateState.value === 'error'),\n  ns.is('validating', validateState.value === 'validating'),\n  ns.is('success', validateState.value === 'success'),\n  ns.is('required', isRequired.value || props.required),\n  ns.is('no-asterisk', formContext?.hideRequiredAsterisk),\n  formContext?.requireAsteriskPosition === 'right'\n    ? 'asterisk-right'\n    : 'asterisk-left',\n  {\n    [ns.m('feedback')]: formContext?.statusIcon,\n    [ns.m(`label-${labelPosition.value}`)]: labelPosition.value,\n  },\n])\n\nconst _inlineMessage = computed(() =>\n  isBoolean(props.inlineMessage)\n    ? props.inlineMessage\n    : formContext?.inlineMessage || false\n)\n\nconst validateClasses = computed(() => [\n  ns.e('error'),\n  { [ns.em('error', 'inline')]: _inlineMessage.value },\n])\n\nconst propString = computed(() => {\n  if (!props.prop) return ''\n  return isArray(props.prop) ? props.prop.join('.') : props.prop\n})\n\nconst hasLabel = computed<boolean>(() => {\n  return !!(props.label || slots.label)\n})\n\nconst labelFor = computed<string | undefined>(() => {\n  return (\n    props.for ?? (inputIds.value.length === 1 ? inputIds.value[0] : undefined)\n  )\n})\n\nconst isGroup = computed<boolean>(() => {\n  return !labelFor.value && hasLabel.value\n})\n\nconst isNested = !!parentFormItemContext\n\nconst fieldValue = computed(() => {\n  const model = formContext?.model\n  if (!model || !props.prop) {\n    return\n  }\n  return getProp(model, props.prop).value\n})\n\nconst normalizedRules = computed(() => {\n  const { required } = props\n\n  const rules: FormItemRule[] = []\n\n  if (props.rules) {\n    rules.push(...ensureArray(props.rules))\n  }\n\n  const formRules = formContext?.rules\n  if (formRules && props.prop) {\n    const _rules = getProp<Arrayable<FormItemRule> | undefined>(\n      formRules,\n      props.prop\n    ).value\n    if (_rules) {\n      rules.push(...ensureArray(_rules))\n    }\n  }\n\n  if (required !== undefined) {\n    const requiredRules = rules\n      .map((rule, i) => [rule, i] as const)\n      .filter(([rule]) => 'required' in rule)\n\n    if (requiredRules.length > 0) {\n      for (const [rule, i] of requiredRules) {\n        if (rule.required === required) continue\n        rules[i] = { ...rule, required }\n      }\n    } else {\n      rules.push({ required })\n    }\n  }\n\n  return rules\n})\n\nconst validateEnabled = computed(() => normalizedRules.value.length > 0)\n\nconst getFilteredRule = (trigger: string) => {\n  const rules = normalizedRules.value\n  return (\n    rules\n      .filter((rule) => {\n        if (!rule.trigger || !trigger) return true\n        if (isArray(rule.trigger)) {\n          return rule.trigger.includes(trigger)\n        } else {\n          return rule.trigger === trigger\n        }\n      })\n      // exclude trigger\n      // eslint-disable-next-line @typescript-eslint/no-unused-vars\n      .map(({ trigger, ...rule }): RuleItem => rule)\n  )\n}\n\nconst isRequired = computed(() =>\n  normalizedRules.value.some((rule) => rule.required)\n)\n\nconst shouldShowError = computed(\n  () =>\n    validateStateDebounced.value === 'error' &&\n    props.showMessage &&\n    (formContext?.showMessage ?? true)\n)\n\nconst currentLabel = computed(\n  () => `${props.label || ''}${formContext?.labelSuffix || ''}`\n)\n\nconst setValidationState = (state: FormItemValidateState) => {\n  validateState.value = state\n}\n\nconst onValidationFailed = (error: FormValidateFailure) => {\n  const { errors, fields } = error\n  if (!errors || !fields) {\n    console.error(error)\n  }\n\n  setValidationState('error')\n  validateMessage.value = errors\n    ? (errors?.[0]?.message ?? `${props.prop} is required`)\n    : ''\n\n  formContext?.emit('validate', props.prop!, false, validateMessage.value)\n}\n\nconst onValidationSucceeded = () => {\n  setValidationState('success')\n  formContext?.emit('validate', props.prop!, true, '')\n}\n\nconst doValidate = async (rules: RuleItem[]): Promise<true> => {\n  const modelName = propString.value\n  const validator = new AsyncValidator({\n    [modelName]: rules,\n  })\n  return validator\n    .validate({ [modelName]: fieldValue.value }, { firstFields: true })\n    .then(() => {\n      onValidationSucceeded()\n      return true as const\n    })\n    .catch((err: FormValidateFailure) => {\n      onValidationFailed(err)\n      return Promise.reject(err)\n    })\n}\n\nconst validate: FormItemContext['validate'] = async (trigger, callback) => {\n  // skip validation if its resetting\n  if (isResettingField || !props.prop) {\n    return false\n  }\n\n  const hasCallback = isFunction(callback)\n  if (!validateEnabled.value) {\n    callback?.(false)\n    return false\n  }\n\n  const rules = getFilteredRule(trigger)\n  if (rules.length === 0) {\n    callback?.(true)\n    return true\n  }\n\n  setValidationState('validating')\n\n  return doValidate(rules)\n    .then(() => {\n      callback?.(true)\n      return true as const\n    })\n    .catch((err: FormValidateFailure) => {\n      const { fields } = err\n      callback?.(false, fields)\n      return hasCallback ? false : Promise.reject(fields)\n    })\n}\n\nconst clearValidate: FormItemContext['clearValidate'] = () => {\n  setValidationState('')\n  validateMessage.value = ''\n  isResettingField = false\n}\n\nconst resetField: FormItemContext['resetField'] = async () => {\n  const model = formContext?.model\n  if (!model || !props.prop) return\n\n  const computedValue = getProp(model, props.prop)\n\n  // prevent validation from being triggered\n  isResettingField = true\n\n  computedValue.value = clone(initialValue)\n\n  await nextTick()\n  clearValidate()\n\n  isResettingField = false\n}\n\nconst addInputId: FormItemContext['addInputId'] = (id: string) => {\n  if (!inputIds.value.includes(id)) {\n    inputIds.value.push(id)\n  }\n}\n\nconst removeInputId: FormItemContext['removeInputId'] = (id: string) => {\n  inputIds.value = inputIds.value.filter((listId) => listId !== id)\n}\n\nconst setInitialValue: FormItemContext['setInitialValue'] = (value: any) => {\n  initialValue = clone(value)\n}\n\nwatch(\n  () => props.error,\n  (val) => {\n    validateMessage.value = val || ''\n    setValidationState(val ? 'error' : '')\n  },\n  { immediate: true }\n)\n\nwatch(\n  () => props.validateStatus,\n  (val) => setValidationState(val || '')\n)\n\nconst context: FormItemContext = reactive({\n  ...toRefs(props),\n  $el: formItemRef,\n  size: _size,\n  validateMessage,\n  validateState,\n  labelId,\n  inputIds,\n  isGroup,\n  hasLabel,\n  fieldValue,\n  addInputId,\n  removeInputId,\n  resetField,\n  clearValidate,\n  validate,\n  propString,\n  setInitialValue,\n})\n\nprovide(formItemContextKey, context)\n\nonMounted(() => {\n  if (props.prop) {\n    formContext?.addField(context)\n    initialValue = clone(fieldValue.value)\n  }\n})\n\nonBeforeUnmount(() => {\n  formContext?.removeField(context)\n})\n\ndefineExpose({\n  /**\n   * @description Form item size.\n   */\n  size: _size,\n  /**\n   * @description Validation message.\n   */\n  validateMessage,\n  /**\n   * @description Validation state.\n   */\n  validateState,\n  /**\n   * @description Validate form item.\n   */\n  validate,\n  /**\n   * @description Remove validation status of the field.\n   */\n  clearValidate,\n  /**\n   * @description Reset current field and remove validation result.\n   */\n  resetField,\n  /**\n   * @description Set initial value for this field. When `resetField` is called, the field will reset to this value.\n   */\n  setInitialValue,\n})\n</script>\n"],"names":["useSlots","inject","formContextKey","formItemContextKey","useFormSize","useNamespace","useId","ref","refDebounced","computed","addUnit","isBoolean","isArray","getProp","ensureArray","trigger","isFunction","clone","nextTick","watch","reactive","toRefs","provide","onMounted","onBeforeUnmount","_createElementBlock","_unref","_createVNode","FormLabelWrap","$slots","_openBlock","_createBlock","_resolveDynamicComponent","_normalizeClass","_renderSlot","_createElementVNode","_TransitionGroup"],"mappings":"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"}